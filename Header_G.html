<div id="header-wrapper"></div>

<script>
  // Obtener los valores desde localStorage
  const avatar = localStorage.getItem("user_avatar_index") || "0";

  const badges = [];
  for (let i = 1; i <= 5; i++) {
    badges.push(localStorage.getItem(`badge_${i}`) === "true" ? 1 : 0);
  }

  const badgeParams = badges.join(",");

  // Nueva URL SIN progress
  const url = `https://pablosko.github.io/GeniallyProFuturo/Header.html?avatar=${avatar}&badges=${badgeParams}`;

  // Crear e insertar el iframe
  const iframe = document.createElement("iframe");
  iframe.id = "header-iframe"; // útil para actualizar más adelante
  iframe.src = url;
  iframe.style.width = "100%";
  iframe.style.height = "150px";
  iframe.style.border = "none";

  document.getElementById("header-wrapper").appendChild(iframe);

  function actualizarIframe() {
  const iframe = document.getElementById("header-iframe");
  if (iframe) {
    const avatar = localStorage.getItem("user_avatar_index") || "0";
    const badges = [];
    for (let i = 1; i <= 5; i++) {
      badges.push(localStorage.getItem(`badge_${i}`) === "true" ? 1 : 0);
    }
    const badgeParams = badges.join(",");
    const nuevaUrl = `https://pablosko.github.io/GeniallyProFuturo/Header.html?avatar=${avatar}&badges=${badgeParams}`;
    iframe.src = nuevaUrl;
  }
}

</script>
